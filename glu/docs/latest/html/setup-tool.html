<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>setup.sh tool &mdash; glu 5.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="glu 5.5.0 documentation" href="index.html" />
    <link rel="next" title="Old Production Setup (prior to 5.1.0)" href="production-setup.html" />
    <link rel="prev" title="Easy Production Setup" href="easy-production-setup.html" />
 
<link rel="stylesheet" href="_static/glu.css" type="text/css" />
<script type="text/javascript" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8362808-6', 'github.io');
  ga('send', 'pageview');

</script>

  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="contents.html">
            <img class="logo" src="_static/glu-logo-214x72.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="contents.html">glu 5.5.0 documentation</a></div>
        <div class="rel">
          <a href="easy-production-setup.html" title="Easy Production Setup"
             accesskey="P">previous</a> |
          <a href="production-setup.html" title="Old Production Setup (prior to 5.1.0)"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

<div class="content-wrapper">
<div class="content">
<div class="document">
  
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="setup-sh-tool">
<span id="setup-tool"></span><h1><tt class="docutils literal"><span class="pre">setup.sh</span></tt> tool<a class="headerlink" href="#setup-sh-tool" title="Permalink to this headline">¶</a></h1>
<p>The setup tool is used during the <a class="reference internal" href="easy-production-setup.html"><em>production setup</em></a>. It comes bundled with glu under <tt class="docutils literal"><span class="pre">$GLU_HOME/bin</span></tt> (assuming that <tt class="docutils literal"><span class="pre">$GLU_HOME</span></tt> is the root of the glu distribution. In order to get more help, simply issue:</p>
<div class="highlight-text"><div class="highlight"><pre>$GLU_HOME/bin/setup.sh -h
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">By default, the setup tool uses the current directory for its output. It is then recommended to <tt class="docutils literal"><span class="pre">cd</span></tt> into the target directory and issue <tt class="docutils literal"><span class="pre">$GLU_HOME/bin/setup.sh</span></tt> commands. Note that you can also use the <tt class="docutils literal"><span class="pre">-o</span> <span class="pre">xxxx</span></tt> to specify the target directory, or enter it when prompted.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">When you run with the <tt class="docutils literal"><span class="pre">-h</span></tt> option, the output will show where the defaults are located on your drive.</p>
</div>
<p>The tool has essentially 3 modes which are used during the setup process.</p>
<div class="section" id="generating-keys-k">
<span id="setup-tool-k"></span><h2>1. Generating keys <tt class="docutils literal"><span class="pre">[-K]</span></tt><a class="headerlink" href="#generating-keys-k" title="Permalink to this headline">¶</a></h2>
<img alt="Generating keys" class="align-center" src="_images/glu-setup-K-800.png" />
<p>This command is used to generate the keys for glu (securing the communication to the agents).</p>
<p>Example usage:</p>
<div class="highlight-text"><div class="highlight"><pre>setup.sh -K -o /tmp/keys --keys-dname &quot;CN=Yan P., OU=IT, O=Acme, L=Mountain View, S=CA, C=US&quot;
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-K</span></tt> (or <tt class="docutils literal"><span class="pre">--gen-keys</span></tt>): to generate the keys</li>
<li><tt class="docutils literal"><span class="pre">-o</span></tt>: the directory in which to generate the set of keys</li>
<li><tt class="docutils literal"><span class="pre">--keys-dname</span></tt>: to provide your own <a class="reference external" href="http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/keytool.html#DName">X.500 distinguished name</a> for the certificates.</li>
</ul>
</div>
<div class="section" id="generating-the-distributions-d">
<span id="setup-tool-d"></span><h2>2. Generating the distributions <tt class="docutils literal"><span class="pre">[-D]</span></tt><a class="headerlink" href="#generating-the-distributions-d" title="Permalink to this headline">¶</a></h2>
<img alt="Generating the distributions" class="align-center" src="_images/glu-setup-D-800.png" />
<p>This command is used to generate the distributions, which are ready to install/run packaged tailored to <strong>your</strong> environment.</p>
<p>Example usage:</p>
<div class="highlight-text"><div class="highlight"><pre>setup.sh -D -o /tmp/distributions/staging --config-templates-root &quot;&lt;default&gt;&quot; \
         --config-templates-root /tmp/glu-meta-model/config-templates /tmp/glu-meta-model/my-meta-model.json.groovy
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-D</span></tt> (or <tt class="docutils literal"><span class="pre">--gen-dist</span></tt>): to generate the distributions</li>
<li><tt class="docutils literal"><span class="pre">-o</span></tt>: the directory in which to generate the distributions</li>
<li><tt class="docutils literal"><span class="pre">--config-templates-root</span> <span class="pre">&quot;&lt;default&gt;&quot;</span></tt>: use the config templates that comes with glu</li>
<li><tt class="docutils literal"><span class="pre">--config-templates-root</span> <span class="pre">xxx</span></tt>: use your own (cumulative)</li>
<li><tt class="docutils literal"><span class="pre">--agents-only</span></tt>: generate the distributions only for agents</li>
<li><tt class="docutils literal"><span class="pre">--consoles-only</span></tt>: generate the distributions only for consoles</li>
<li><tt class="docutils literal"><span class="pre">--zookeeper-clusters-only</span></tt>: generate the distributions only for ZooKeeper clusters</li>
<li><tt class="docutils literal"><span class="pre">--keys-root</span></tt>: only used if you define relative uris for the keys in the meta model (rarely used)</li>
<li><tt class="docutils literal"><span class="pre">--packages-root</span></tt>: only used if you do not want to use the packages that come with glu (rarely used)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">--config-templates-root</span></tt> is cumulative, meaning you can define as many as you want and they will all be processed. The order is <strong>important</strong>. It is strongly recommended to always use <tt class="docutils literal"><span class="pre">--config-templates-root</span> <span class="pre">&quot;&lt;default&gt;&quot;</span></tt> first, then your own.</p>
</div>
</div>
<div class="section" id="configure-zookeeper-clusters-z">
<span id="setup-tool-z"></span><h2>3. Configure ZooKeeper clusters <tt class="docutils literal"><span class="pre">[-Z]</span></tt><a class="headerlink" href="#configure-zookeeper-clusters-z" title="Permalink to this headline">¶</a></h2>
<img alt="Configure ZooKeeper clusters" class="align-center" src="_images/glu-setup-Z-800.png" />
<p>This command is used to upload the configuration (that was generated during the <tt class="docutils literal"><span class="pre">-D</span></tt> phase) to the ZooKeeper clusters. This means that you should run <tt class="docutils literal"><span class="pre">-D</span></tt> prior to using this command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order for this command to succeed, the ZooKeeper clusters must be up and running.</p>
</div>
<p>Example usage:</p>
<div class="highlight-text"><div class="highlight"><pre>setup.sh -Z -o /tmp/distributions/staging /tmp/glu-meta-model/my-meta-model.json.groovy
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-Z</span></tt> (or <tt class="docutils literal"><span class="pre">--configure-zookeeper-clusters</span></tt>): to configure the ZooKeeper clusters</li>
<li><tt class="docutils literal"><span class="pre">-o</span></tt>: the directory in which the distributions were generated (provided during <tt class="docutils literal"><span class="pre">-D</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">--zookeeper-cluster-name</span></tt>: only configure the cluster with the provided name (cumulative)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For simplicity and consistency, the <tt class="docutils literal"><span class="pre">-o</span></tt> option is being reused although in this case it is not an output folder, but an input one: Nothing will be written in this folder during this step.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">zookeeper-cluster-name</span></tt> is cumulative so you can provide more than one.</p>
</div>
</div>
<div class="section" id="showing-the-json-model-j">
<span id="setup-tool-j"></span><h2>4. Showing the json model <tt class="docutils literal"><span class="pre">[-J]</span></tt><a class="headerlink" href="#showing-the-json-model-j" title="Permalink to this headline">¶</a></h2>
<p>This command is used to render the meta model in json format.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The meta model comes with a lot of default values (example: the agent port is <tt class="docutils literal"><span class="pre">12906</span></tt>), which means that if you do not define it in the meta model, the default value will be used. This representation fully expand and show all default values.</p>
</div>
<p>Example usage:</p>
<div class="highlight-text"><div class="highlight"><pre>setup.sh -J /tmp/glu-meta-model/my-meta-model.json.groovy
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
</div>
<div class="sidebar">
    <div class="admonition warning">
    <p class="first admonition-title">Warning</p>
        <p>
            2014/04/19: A <a href="https://github.com/pongasoft/glu/issues/262">critical bug</a> while upgrading has been found. It is strongly advised not to upgrade at this time.
        </p>
    </div>
  <div class="sidebar-entry">
    <h3>Table Of Contents</h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">What is glu?</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">A taste of glu (tutorial)</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html"> Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-script.html"> glu script</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration-engine.html"> Orchestration engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-model.html"> Static Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtering.html"> Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"> Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="meta-model.html">Meta Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-config.html">Configuring glu</a></li>
<li class="toctree-l1"><a class="reference internal" href="easy-production-setup.html">Easy Production Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><tt class="docutils literal"><span class="pre">setup.sh</span></tt> tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#generating-keys-k">1. Generating keys <tt class="docutils literal"><span class="pre">[-K]</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-the-distributions-d">2. Generating the distributions <tt class="docutils literal"><span class="pre">[-D]</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-zookeeper-clusters-z">3. Configure ZooKeeper clusters <tt class="docutils literal"><span class="pre">[-Z]</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#showing-the-json-model-j">4. Showing the json model <tt class="docutils literal"><span class="pre">[-J]</span></tt></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="production-setup.html">Old Production Setup (prior to 5.1.0)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-setup.html">Compiling glu</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration-guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html">All content</a></li>
</ul>

  </div>
<div class="sidebar-entry">
  <h3>Quick Links</h3>
  <ul class="quick-links">
    <li><a href="https://bintray.com/pkg/show/general/pongasoft/glu/releases/">Download</a>
    <li><a href="tutorial.html">Tutorial</a>
    <li><a href="http://www.github.com/pongasoft/glu">Source Code</a>
    <li><a href="http://glu.977617.n3.nabble.com/">Forum / Questions / Help</a>
    <li><a href="http://devops.com/2011/07/09/glu-deployment-automation-video/">Video (July 2011)</a>
    <li><a href="https://plus.google.com/111352340806201326494" rel="publisher" style="text-decoration:none;">Google+<img src="https://ssl.gstatic.com/images/icons/gplus-32.png" alt="" style="border:0;width:16px;height:16px;margin:0;padding:0 0 0 .5em;vertical-align:middle"/></a>
    <li><a href="https://plus.google.com/communities/118019862679241960849">Google+ Community</a></li>
    <li><a href="http://twitter.com/glutweets">Twitter</a>
    <li><a href="https://github.com/pongasoft/glu/issues">Issues / Tasks</a>
    <li><a href="RELEASE.html">Latest Changes</a>
  </ul>
</div>
<div class="sidebar-entry">
  <h3>Technologies</h3>
  <ul class="quick-links">
    <li><a href="http://www.ej-technologies.com/products/jprofiler/overview.html">JProfiler</a>
  </ul>
</div>
  <div class="sidebar-entry">
    <h3>Twitter</h3>
      <a class="twitter-timeline" href="https://twitter.com/glutweets" data-widget-id="457620062292041728">Tweets by @glutweets</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>


  </div>
</div>
<div style="display:none">
   <a href="https://plus.google.com/111352340806201326494" rel="publisher">Google+</a>
</div>
<div class="clearer"></div>
</div>

</div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="easy-production-setup.html" title="Easy Production Setup"
             >previous</a> |
          <a href="production-setup.html" title="Old Production Setup (prior to 5.1.0)"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011-2014, Yan Pujante.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>