<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Console &mdash; glu 5.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="glu 5.5.0 documentation" href="index.html" />
    <link rel="next" title="Meta Model" href="meta-model.html" />
    <link rel="prev" title="Filtering" href="filtering.html" />
 
<link rel="stylesheet" href="_static/glu.css" type="text/css" />
<script type="text/javascript" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8362808-6', 'github.io');
  ga('send', 'pageview');

</script>

  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="contents.html">
            <img class="logo" src="_static/glu-logo-214x72.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="contents.html">glu 5.5.0 documentation</a></div>
        <div class="rel">
          <a href="filtering.html" title="Filtering"
             accesskey="P">previous</a> |
          <a href="meta-model.html" title="Meta Model"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

<div class="content-wrapper">
<div class="content">
<div class="document">
  
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="console-logo-console">
<h1><img alt="console logo" class="header-logo" src="_images/console-logo-86.png" /> Console<a class="headerlink" href="#console-logo-console" title="Permalink to this headline">¶</a></h1>
<p>The glu console is a web application that offers a graphical presentation on top of the <a class="reference internal" href="orchestration-engine.html"><em>orchestration engine</em></a>.</p>
<div class="section" id="console-in-action">
<h2>Console in action<a class="headerlink" href="#console-in-action" title="Permalink to this headline">¶</a></h2>
<p>The best way to get a feel of what the console looks like and what can be achieved, take a look at the <a class="reference internal" href="tutorial.html"><em>tutorial</em></a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="easy-production-setup.html#easy-production-setup-gen-dist"><em>distribution generation</em></a> phase generates a full web application container (jetty) that is ready to be used.</p>
<div class="section" id="console-as-a-server">
<span id="id1"></span><h3>Console as a server<a class="headerlink" href="#console-as-a-server" title="Permalink to this headline">¶</a></h3>
<p>Simply follow <a class="reference internal" href="easy-production-setup.html#easy-production-setup-install"><em>Step 5: Install the distributions</em></a> in order to install the server that was generated for you.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This is the recommended way for deploying the console.</p>
</div>
</div>
<div class="section" id="console-as-a-war">
<span id="id2"></span><h3>Console as a war<a class="headerlink" href="#console-as-a-war" title="Permalink to this headline">¶</a></h3>
<p>If you want to deploy the console in another web container then do the following:</p>
<blockquote>
<div><ul>
<li><p class="first">generate the <a class="reference internal" href="easy-production-setup.html#easy-production-setup-gen-dist"><em>distributions</em></a> the normal way</p>
</li>
<li><p class="first">then create the war file manually:</p>
<div class="highlight-text"><div class="highlight"><pre>cd &lt;outputFolder&gt;/consoles/org.linkedin.glu.console-server-&lt;version&gt;/
cd glu/repository/exploded-wars/org.linkedin.glu.console-webapp-&lt;version&gt;/
jar cfm /tmp/org.linkedin.glu.console-webapp-&lt;version&gt;.war META-INF/MANIFEST.MF *
</pre></div>
</div>
</li>
<li><p class="first">make the configuration file that was generated (<tt class="docutils literal"><span class="pre">&lt;outputFolder&gt;/consoles/org.linkedin.glu.console-server-&lt;version&gt;/glu-console-webapp.groovy</span></tt>) available to your application server by using one of the following 3 techniques</p>
</li>
</ul>
<blockquote>
<div><ol class="arabic simple">
<li>store it under <tt class="docutils literal"><span class="pre">$HOME/.org.linkedin.glu/glu-console-webapp.groovy</span></tt></li>
<li>store it under <tt class="docutils literal"><span class="pre">conf/glu-console-webapp.groovy</span></tt> (relative to wherever the VM <tt class="docutils literal"><span class="pre">user.dir</span></tt> is set to)</li>
<li>pass a system property <tt class="docutils literal"><span class="pre">-Dorg.linkedin.glu.console.config.location=/fullpath/to/file</span></tt> (or use the <tt class="docutils literal"><span class="pre">JAVA_OPTIONS</span></tt> environment variable)</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="configuration">
<span id="console-configuration"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The console is configured by defining the proper parameters (<tt class="docutils literal"><span class="pre">configTokens</span></tt>) in the <a class="reference internal" href="meta-model.html#meta-model-console"><em>meta model</em></a> or providing the proper <tt class="docutils literal"><span class="pre">config-templates</span></tt> for more control.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All code examples (unless noted otherwise) are showing extracts of the meta model.</p>
</div>
<div class="section" id="console-agent-connection">
<h3>Console &lt;-&gt; Agent Connection<a class="headerlink" href="#console-agent-connection" title="Permalink to this headline">¶</a></h3>
<p>The console (orchestration engine) talks to all the agents using a REST api over https (or http if you do disable security). If you define a set of keys for the fabric hosted by the console, then the communication will happen over https, otherwise it will happen over http:</p>
<div class="highlight-text"><div class="highlight"><pre>// enable https communication
def keys = [
   ...
]

// disable https communication
// def keys = null

fabrics[&quot;myFabric&quot;] = [
  keys: keys,
  console: &#39;myConsole&#39;,
  ...
]

consoles &lt;&lt; [
  name: &#39;myConsole&#39;,
  ...
  ],
]
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Disabling the secure connection means that the agents will happily serve any request irrelevant of where it is coming from, which could be a serious security hole and as result is not recommended!</p>
</div>
</div>
<div class="section" id="plugins">
<h3>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h3>
<p>The console (orchestration engine) behavior can be tweaked and or enhanced with the use of plugins. Check the <a class="reference internal" href="orchestration-engine.html#goe-plugins"><em>Plugins</em></a> section for details on how to create and install a plugin.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Since 4.1.0, <em>restricting file access on an agent</em> has been migrated to the <tt class="docutils literal"><span class="pre">StreamFileContentPlugin</span></tt> plugin and is now being configured by defining the properties:</p>
<div class="last highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     plugins: &quot;&quot;&quot;
// path to the root of the unrestricted location (empty means no restriction)
// this property is used by StreamFileContentPlugin
plugins.StreamFileContentPlugin.unrestrictedLocation = &quot;&quot;

// role for unrestricted
plugins.StreamFileContentPlugin.unrestrictedRole = &#39;ADMIN&#39;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
</div>
<div class="section" id="database">
<span id="console-configuration-database"></span><h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>The console uses a database to store some of its data (like the audit log, user information, etc...). The built-in database that comes bundled with glu is <a class="reference external" href="http://hsqldb.org/">HSQLDB</a>. The default location of the database is under the <tt class="docutils literal"><span class="pre">database/prod</span></tt> folder at the root of the jetty server. You may want to change this location by modifying the following section in the configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     dataSource: &quot;&quot;&quot;
dataSource.dbCreate = &quot;update&quot;
dataSource.url = &quot;jdbc:hsqldb:file:/path/to/database;shutdown=true&quot;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is not recommended to use the HSQLDB database in a real production environment. Please consider using another database like MySql (see next section).</p>
</div>
<div class="section" id="example-for-a-different-database-mysql">
<span id="console-configuration-database-mysql"></span><h4>Example for a different database: MySql<a class="headerlink" href="#example-for-a-different-database-mysql" title="Permalink to this headline">¶</a></h4>
<p>Here are the steps to follow in order to use MySql instead of HSQLDB (the steps would be very similar for a different database!)</p>
<ul>
<li><p class="first">Download and install MySql on your system (don&#8217;t forget to start it!)</p>
</li>
<li><p class="first">Connect to MySql and create the <tt class="docutils literal"><span class="pre">glu</span></tt> user:</p>
<div class="highlight-text"><div class="highlight"><pre>sudo /usr/local/mysql/bin/mysql
mysql&gt; create database glu;
mysql&gt; show databases;
mysql&gt; create user &#39;glua&#39;@&#39;localhost&#39; identified by &#39;password&#39;;
mysql&gt; grant all on glu.* to &#39;glua&#39;@&#39;localhost&#39;;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This values are obviously just example values (they simply need to be plugged in the right place in the configuration file (see below)).</p>
</div>
</li>
<li><p class="first">Edit the meta model in this fashion:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   dataSourceDriverUri: &#39;http://jcenter.bintray.com/mysql/mysql-connector-java/5.1.25/mysql-connector-java-5.1.25.jar&#39;,
   configTokens: [
     dataSource: &quot;&quot;&quot;
def dataSourceUrl = &quot;jdbc:mysql://hostWhereMySqlIsRunning/glu&quot;
dataSource.dbCreate = &quot;update&quot;
dataSource.url = dataSourceUrl
dataSource.logSql=false // set to true for details (+ open trace logging level)
dataSource.dialect = &quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;
dataSource.driverClassName = &quot;com.mysql.jdbc.Driver&quot;
dataSource.username= &quot;glua&quot; // this is from the glu user creation step
dataSource.password = &quot;password&quot; // this is from the glu user creation step
     &quot;&quot;&quot;
   ]
 ],
</pre></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You may want to check the quick production meta model that comes bundled with glu as it demonstrates the configuration steps.</p>
</div>
<ul>
<li><p class="first">Start the console</p>
</li>
<li><p class="first">You can check that MySql is being used:</p>
<div class="highlight-text"><div class="highlight"><pre>mysql&gt; use glu;
mysql&gt; show tables;
+---------------------+
| Tables_in_glu       |
+---------------------+
| audit_log           |
| db_current_system   |
| db_deployment       |
| db_system_model     |
| db_user_credentials |
| fabric              |
| role                |
| user                |
| user_permissions    |
| user_role           |
+---------------------+
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are experiencing the following issue with
MySql:</p>
<div class="highlight-text"><div class="highlight"><pre>2012/04/25 10:08:30.344 ERROR [JDBCExceptionReporter] The last packet successfully received
from the server was 73,329,213 milliseconds ago. The last packet sent successfully to the
server was 73,329,214 milliseconds ago. is longer than the server configured value of
&#39;wait_timeout&#39;. You should consider either expiring and/or testing connection validity
before use in your application, increasing the server configured values for client
timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid
this problem
</pre></div>
</div>
<p>it has been <a class="reference external" href="https://github.com/pongasoft/glu/issues/141">reported</a> that in order to fix the issue, you can add the following configuration properties
file:</p>
<div class="last highlight-text"><div class="highlight"><pre>dataSource.properties.validationQuery = &quot;SELECT 1&quot;
dataSource.properties.testWhileIdle = false
dataSource.properties.timeBetweenEvictionRunsMillis = 1800000
dataSource.properties.minEvictableIdleTimeMillis = 1800000
dataSource.properties.numTestsPerEvictionRun = 3
dataSource.properties.testOnBorrow = true
dataSource.properties.testOnReturn = false
</pre></div>
</div>
</div>
</div>
<div class="section" id="other-databases-oracle-postgressql">
<span id="console-configuration-database-other"></span><h4>Other databases: Oracle, PostgresSQL<a class="headerlink" href="#other-databases-oracle-postgressql" title="Permalink to this headline">¶</a></h4>
<p>Some databases (like Oracle and PostgresSQL) do not allow to have a table named <tt class="docutils literal"><span class="pre">USER</span></tt>. In order to use one of this database, you need to add the following property to the glu configuration file (<tt class="docutils literal"><span class="pre">console-server/conf/glu-console-webapp.groovy</span></tt>):</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     dataSource: &quot;&quot;&quot;
... // dataSource configuration goes here
console.datasource.table.user.mapping = &quot;db_user&quot;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>The log4j section allows you to configure where and how the console logs its output. It is a DSL and you can view more details on how to configure it directly on the <a class="reference external" href="http://grails.org/doc/1.3.x/guide/3.%20Configuration.html#3.1.2%20Logging">grails web site</a>. If you want to provide your own log4j configuration simply edit the following section:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     log4j: &quot;&quot;&quot;
{
   appenders {
    file name:&#39;file&#39;,
    file:&#39;logs/console.log&#39;,
    layout:pattern(conversionPattern: &#39;%d{yyyy/MM/dd HH:mm:ss.SSS} %p [%c{1}] %m%n&#39;)
   }
 ... etc ...
}
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This has nothing to do with the audit log!</p>
</div>
</div>
<div class="section" id="ldap">
<span id="console-configuration-ldap"></span><h3>LDAP<a class="headerlink" href="#ldap" title="Permalink to this headline">¶</a></h3>
<p>You can configure LDAP for handling user management in the console. See <a class="reference internal" href="#console-user-management"><em>User management</em></a> for details. Here is the relevant section in the configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     ldap: &quot;&quot;&quot;
ldap.server.url=&quot;ldaps://ldap.acme.com:3269&quot;
ldap.search.base=&quot;dc=acme,dc=com&quot;
ldap.search.user=&quot;cn=glu,ou=glu,dc=acme,dc=com&quot;
ldap.search.pass=&quot;helloworld&quot;
ldap.username.attribute=&quot;sAMAccountName&quot;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
<div class="section" id="security-levels">
<span id="console-configuration-security-levels"></span><h3>Security Levels<a class="headerlink" href="#security-levels" title="Permalink to this headline">¶</a></h3>
<p>You can define your own security level (<cite>USER</cite>, <cite>RELEASE</cite> or <cite>ADMIN</cite>) per URL by defining a property like this:</p>
<div class="highlight-text"><div class="highlight"><pre>console.security.roles.&#39;&lt;path&gt;&#39; = &#39;&lt;role&gt;&#39;
</pre></div>
</div>
<p>You can define your own security level (<cite>USER</cite>, <cite>RELEASE</cite> or <cite>ADMIN</cite>) per REST call by defining a property like this:</p>
<div class="highlight-text"><div class="highlight"><pre>console.security.roles.&#39;&lt;method&gt;:&lt;path&gt;&#39; = &#39;&lt;role&gt;&#39;
</pre></div>
</div>
<p>Here are some examples:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     security: &quot;&quot;&quot;
// a URL for the web interface
console.security.roles.&#39;/model/load&#39; = &#39;USER&#39;

// a REST call
console.security.roles.&#39;POST:/rest/v1/$fabric/model/static&#39; = &#39;RELEASE&#39;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can check the <a class="reference external" href="https://github.com/pongasoft/glu/blob/master/console/org.linkedin.glu.console-webapp/grails-app/conf/Config.groovy">Config</a> file for an exhaustive list of all the URLs and REST calls.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>If you have more than one entry to change, you can use a simpler notation:</p>
<div class="last highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     security: &quot;&quot;&quot;
console.security.roles.putAll([
  &#39;/agents/kill/$id/$pid&#39;: &#39;ADMIN&#39;,
  &#39;/plan/execute/$id&#39;: &#39;ADMIN&#39;,
  &#39;/plan/filter/$id&#39;: &#39;ADMIN&#39;
])
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can customize or bypass entirely the way glu handles security by implemeting your own <a class="reference internal" href="orchestration-engine.html#goe-plugins"><em>plugin</em></a></p>
</div>
</div>
<div class="section" id="tuning">
<h3>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h3>
<div class="section" id="deployments-auto-archive">
<h4>Deployments auto-archive<a class="headerlink" href="#deployments-auto-archive" title="Permalink to this headline">¶</a></h4>
<p>The plans page displays the list of deployments that have happened recently. Since 3.3.0, items in this list are automatically archived after 30 minutes. You can tune this property or simply disable automatic archiving by adding the following property:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     tuning: &quot;&quot;&quot;
// set it to &quot;0&quot; if you want to disable auto archiving entirely
console.deploymentService.autoArchiveTimeout = &quot;30m&quot;
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
<div class="section" id="limiting-the-number-of-parallel-steps">
<span id="console-configuration-limiting-parallel-steps"></span><h4>Limiting the number of parallel steps<a class="headerlink" href="#limiting-the-number-of-parallel-steps" title="Permalink to this headline">¶</a></h4>
<p>When running deployments in parallel, there is, by default, no limitation on how many steps can be executed at the same time. Depending on the size of your system, this may put a lot of stress on your infrastructure (like the network, binary repositories, etc...). In order to limit how many steps can run in parallel, you set it this way:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     tuning: &quot;&quot;&quot;
// The following property limits how many (leaf) steps get executed in parallel during a deployment
// By default (undefined), it is unlimited
console.deploymentService.deployer.planExecutor.leafExecutorService.fixedThreadPoolSize = 500
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
<div class="section" id="session-timeout">
<span id="console-configuration-session-timeout"></span><h4>Session timeout<a class="headerlink" href="#session-timeout" title="Permalink to this headline">¶</a></h4>
<p>You can change the session timeout by defining the following property (and as the name of the property implies, you need to provide the value in minutes):</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     sessionTimeoutInMinutes: 60 // 1 hour
   ]
],
</pre></div>
</div>
</div>
</div>
<div class="section" id="plan">
<h3>Plan<a class="headerlink" href="#plan" title="Permalink to this headline">¶</a></h3>
<div class="section" id="skipping-missing-agents">
<h4>Skipping missing agents<a class="headerlink" href="#skipping-missing-agents" title="Permalink to this headline">¶</a></h4>
<p>By default, a missing agent generates a noop entry in the plan, or in other words it is skipped when the plan runs. If you want to change this behavior and generate an entry (which will fail on execution), then change the following property to <tt class="docutils literal"><span class="pre">false</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     misc: &quot;&quot;&quot;
// set to false if you want missing agents to not be skipped anymore in plan computation
console.plannerService.planner.skipMissingAgents = true
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
</div>
</div>
<div class="section" id="ui-configuration">
<h3>UI configuration<a class="headerlink" href="#ui-configuration" title="Permalink to this headline">¶</a></h3>
<p>The UI is configured in the <tt class="docutils literal"><span class="pre">console.defaults</span></tt> section of the configuration file. It is a simple map:</p>
<div class="highlight-text"><div class="highlight"><pre>console.defaults =
[
  ... configuration goes here ...
]
</pre></div>
</div>
<p>In order to use your own values, you can either provide (in the meta model) your entire <tt class="docutils literal"><span class="pre">console.defaults</span></tt> section:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     &#39;console.defaults&#39;: &quot;&quot;&quot;
[
  ... configuration goes here ...
]
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<p>or simply override specific values:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     &#39;console.defaults.override&#39;: &quot;&quot;&quot;
console.defaults.customCss = ...
console.defaults.dashboardAgentLinksToAgent = true
...
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following sections will simply call out the specific entries within the <tt class="docutils literal"><span class="pre">console.defaults</span></tt> map, but you can use either method to change them.</p>
</div>
<div class="section" id="custom-css">
<span id="console-configuration-custom-css"></span><h4>Custom Css<a class="headerlink" href="#custom-css" title="Permalink to this headline">¶</a></h4>
<p>If you want to customize the look and feel of the console and override or tweak any css value, you can provide your own custom css. Possible values are <tt class="docutils literal"><span class="pre">null</span></tt> (or simply non existent), <tt class="docutils literal"><span class="pre">String</span></tt> or <tt class="docutils literal"><span class="pre">URI</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>// no custom css
customCss: null

// as a String (using groovy &quot;&quot;&quot; notation makes it convenient)
customCss: &quot;&quot;&quot;
  .OK {
    background: green;
  }
&quot;&quot;&quot;

// as a URI (for security reasons should be local!)
customCss: new URI(&quot;/glu/repository/css/custom.css&quot;)
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Since 5.1.0 there is also another way to entirely change the css files. Check the <a class="reference internal" href="#console-further-customizations"><em>Further customizations</em></a> section.</p>
</div>
</div>
<div class="section" id="default-dashboard">
<h4>Default Dashboard<a class="headerlink" href="#default-dashboard" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="#console-default-dashboard"><em>section</em></a> on how to configure the <tt class="docutils literal"><span class="pre">dashboard</span></tt> section of the configuration file.</p>
</div>
<div class="section" id="tags">
<h4>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h4>
<p>You can specify the colors of each tag (foreground and background):</p>
<div class="highlight-text"><div class="highlight"><pre>tags:
[
  &#39;__default__&#39;: [background: &#39;#005a87&#39;, color: &#39;#ffffff&#39;],
  &#39;webapp&#39;: [background: &#39;#ec7000&#39;, color: &#39;#fff0e1&#39;],
  &#39;frontend&#39;: [background: &#39;#006633&#39;, color: &#39;#f1f5ec&#39;],
  &#39;backend&#39;: [background: &#39;#5229a3&#39;, color: &#39;#e0d5f9&#39;],
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <tt class="docutils literal"><span class="pre">__default__</span></tt> entry is optional and specify the color of the tags that are not specifically defined</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the color value (ex: <tt class="docutils literal"><span class="pre">#005a87</span></tt>) ends up being used in css so you can use whatever is legal in css (ex: <tt class="docutils literal"><span class="pre">red</span></tt>)</p>
</div>
</div>
<div class="section" id="model">
<h4>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h4>
<p>The model page displays a summary and the columns are configurable in the following section:</p>
<div class="highlight-text"><div class="highlight"><pre>model:
[
   agent: [name: &#39;agent&#39;],
  &#39;tags.webapp&#39;: [name: &#39;webapp&#39;],
   &#39;metadata.container.name&#39;: [name: &#39;container&#39;],
   &#39;metadata.product&#39;: [name: &#39;product&#39;],
   &#39;metadata.version&#39;: [name: &#39;version&#39;],
   &#39;metadata.cluster&#39;: [name: &#39;cluster&#39;]
]
</pre></div>
</div>
<p>This configuration results in the following output:</p>
<img alt="Model display configuration" class="align-center" src="_images/configuration-system-600.png" />
<p><tt class="docutils literal"><span class="pre">model</span></tt> is a map with the following convention:</p>
<ul class="simple">
<li>the key represent the <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> of an entry (see: <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for more details and examples on the dotted notation)</li>
<li>the value is a map with (currently) one entry only: <tt class="docutils literal"><span class="pre">name</span></tt> which represents the (display) name of the column</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since 3.3.0, it takes effect only when showing a single model: for performance reasons the page which shows the list of models no longer fetches the model and as such cannot display this information</p>
</div>
</div>
<div class="section" id="non-editable-model">
<span id="console-configuration-non-editable-model"></span><h4>Non Editable Model<a class="headerlink" href="#non-editable-model" title="Permalink to this headline">¶</a></h4>
<p>You can enable or disable the fact that a system model is editable or not by changing the following property:</p>
<div class="highlight-text"><div class="highlight"><pre>disableModelUpdate: false,
</pre></div>
</div>
<p>By default, the model is editable which means that there is a <tt class="docutils literal"><span class="pre">Save</span> <span class="pre">Changes</span></tt> button and the text area containing the body is editable. Changing this value to <tt class="docutils literal"><span class="pre">true</span></tt> removes the button and makes the text area non editable anymore.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if the model is not editable, it is always possible to <em>load</em> a new one by going to the <tt class="docutils literal"><span class="pre">Model</span></tt> tab. The idea behind this feature is to enforce the fact that the model should be properly versioned outside of glu and changing it should go through a proper flow that is beyond the scope of glu.</p>
</div>
</div>
<div class="section" id="shortcut-filters">
<h4>Shortcut Filters<a class="headerlink" href="#shortcut-filters" title="Permalink to this headline">¶</a></h4>
<p>This entry allows you to define a dropdown that will be populated based on the model metadata in order to quickly set a filter. In the screenshot below, clicking on <tt class="docutils literal"><span class="pre">'product2:2.0.0'</span></tt> in the dropdown is equivalent to removing the current filter on <tt class="docutils literal"><span class="pre">product1</span></tt> and adding a new one for <tt class="docutils literal"><span class="pre">product2</span></tt> simplifying going back and forth between globally used concepts (like teams or product lines or zones, etc...):</p>
<div class="highlight-text"><div class="highlight"><pre>shortcutFilters:
[
    [
        name: &#39;product&#39;,
        source: &#39;metadata.product&#39;,
        header: [&#39;version&#39;]
    ]
]
</pre></div>
</div>
<p>This configuration results in the following output:</p>
<img alt="Shortcut filters" class="align-center" src="_images/shortcut-filters.png" />
<p>The format of this entry is an array of maps (so you can have more than one!) where each map consists of:</p>
<ul class="simple">
<li>a <tt class="docutils literal"><span class="pre">name</span></tt> entry which will be displayed in the dropdown when no filter entry is selected <tt class="docutils literal"><span class="pre">All</span> <span class="pre">[&lt;name&gt;]</span></tt></li>
<li>a <tt class="docutils literal"><span class="pre">source</span></tt> which represents a <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> of which data to use in the model. The data in the model should have the following structure:<ul>
<li>the key is the value of the filter</li>
<li>the value is another map with the following convention:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the display name of the value (in this example they are the same!)</li>
<li>other entries that are used in the <tt class="docutils literal"><span class="pre">header</span></tt> section (see below)</li>
</ul>
</li>
</ul>
</li>
<li>a <tt class="docutils literal"><span class="pre">header</span></tt> entry which is an array for extra information referring to entries in the metadata (see above)</li>
</ul>
<p>Example of model which produces the previous screen:</p>
<div class="highlight-text"><div class="highlight"><pre>&quot;metadata&quot;: {
  &quot;product&quot;: { &lt;================ value as defined in the model section (name: &#39;product&#39;)
    &quot;product1&quot;: { &lt;============= first entry (value for the filter!)
      &quot;name&quot;: &quot;product1&quot;, &lt;===== display name of the value
      &quot;version&quot;: &quot;1.0.0&quot;  &lt;===== extra info as defined in the model section (header: [&#39;version&#39;])
    },
    &quot;product2&quot;: { &lt;============= second entry (value for the filter!)
      &quot;name&quot;: &quot;product2&quot;, &lt;===== display name of the value
      &quot;version&quot;: &quot;2.0.0&quot;  &lt;===== extra info as defined in the model section (header: [&#39;version&#39;])
    }
  }
}
</pre></div>
</div>
</div>
<div class="section" id="header">
<h4>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h4>
<p>This entry allows you to add more information to the header in the console:</p>
<div class="highlight-text"><div class="highlight"><pre>header:
[
    metadata: [&#39;drMode&#39;]
]
</pre></div>
</div>
<p>This entry simply contains a <tt class="docutils literal"><span class="pre">metadata</span></tt> section which is an array of keys in the <a class="reference internal" href="glossary.html#term-metadata"><em class="xref std std-term">metadata</em></a> of the model (<strong>not</strong> of an entry).</p>
<p>Example of model:</p>
<div class="highlight-text"><div class="highlight"><pre> &quot;metadata&quot;: {
   &quot;product&quot;: {...},
   &quot;drMode&quot;: &quot;primary&quot;
}
</pre></div>
</div>
<p>The previous model and <tt class="docutils literal"><span class="pre">header</span></tt> configuration produce the following output:</p>
<img alt="Header configuration" class="align-center" src="_images/configuration-header.png" />
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Since every fabric has its own model, hence its own <tt class="docutils literal"><span class="pre">metadata</span></tt> section, this feature is a convenient way to display fabric specific information. In this example we can display which fabric represents the primary data center versus which one represents the secondary data center.</p>
</div>
</div>
<div class="section" id="dashboard-agent-links">
<h4>Dashboard Agent Links<a class="headerlink" href="#dashboard-agent-links" title="Permalink to this headline">¶</a></h4>
<p>By default (new since 4.0.0), a link to an agent name in the dashboard has the same effect as all other links on the dashboard: it adds a filter. In this case it filters the model to see only the entries on this specific agent. The top level <tt class="docutils literal"><span class="pre">'Agents'</span></tt> tab allows you to navigate to the agent view. If you want to turn this off (thus reverting to the behavior prior to 4.0.0) use this entry (<tt class="docutils literal"><span class="pre">dashboard</span></tt> section of the configuration file):</p>
<div class="highlight-text"><div class="highlight"><pre>dashboardAgentLinksToAgent: true
</pre></div>
</div>
</div>
<div class="section" id="plans">
<span id="console-configuration-plans"></span><h4>Plans<a class="headerlink" href="#plans" title="Permalink to this headline">¶</a></h4>
<p>This (optional) entry allow you to configure what gets displayed in the table when you select the <tt class="docutils literal"><span class="pre">Plans</span></tt> subtab. Example (using the custom state machine as defined in the <a class="reference external" href="glu-script-state-machine">Defining your own state machine</a> section):</p>
<div class="highlight-text"><div class="highlight"><pre>plans: [
  [planType: &quot;deploy&quot;],
  [planType: &quot;redeploy&quot;],
  [planType: &quot;undeploy&quot;],
  [planType: &quot;transition&quot;, displayName: &quot;* -&gt; s1&quot;, state: &quot;s1&quot;],
  [planType: &quot;transition&quot;, displayName: &quot;* -&gt; NONE&quot;, state: &quot;NONE&quot;],
],
</pre></div>
</div>
<p>The <em>standard</em> plan types are: <tt class="docutils literal"><span class="pre">deploy</span></tt>, <tt class="docutils literal"><span class="pre">redeploy</span></tt>, <tt class="docutils literal"><span class="pre">undeploy</span></tt>, <tt class="docutils literal"><span class="pre">bounce</span></tt> and <tt class="docutils literal"><span class="pre">transition</span></tt> (which requires a <tt class="docutils literal"><span class="pre">state</span></tt> attribute).</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">By using the <a class="reference internal" href="orchestration-engine.html#goe-plugins"><em>plugin hook</em></a> <tt class="docutils literal"><span class="pre">PlannerService_pre_computePlans</span></tt> you can add your own plan types!</p>
</div>
</div>
<div class="section" id="mountpoint-actions">
<span id="console-configuration-mountpointactions"></span><h4>MountPoint actions<a class="headerlink" href="#mountpoint-actions" title="Permalink to this headline">¶</a></h4>
<p>This (optional) entry defines the actions available for a given mountPoint on the agents page. Example (using the custom state machine as defined in the <a class="reference external" href="glu-script-state-machine">Defining your own state machine</a> section):</p>
<div class="highlight-text"><div class="highlight"><pre>// - key is &quot;state of the mountPoint&quot; (meaning, if the state of the mountPoint is &quot;&lt;key&gt;&quot; then
//   display the actions defined by the value)
//   * The key &quot;-&quot; is special and is reserved for the actions to display when the state does
//     not have an entry (in this example, everything besides running).
//   * The key &quot;*&quot; is special and is reserved for the actions to display all the time.
//
// - value is a map defining what to do (ex: bounce, undeploy) as well as extra informations
mountPointActions: [
  s2: [
    [planType: &quot;transition&quot;, displayName: &quot;s2 -&gt; s1&quot;, state: &quot;s1&quot;],
    [planType: &quot;transition&quot;, displayName: &quot;s2 -&gt; NONE&quot;, state: &quot;NONE&quot;],
  ],

  // all other states
  &quot;-&quot;: [
    [planType: &quot;transition&quot;, displayName: &quot;Start&quot;, state: &quot;s2&quot;],
  ],

  // actions to include for all states
  &quot;*&quot;: [
    [planType: &quot;undeploy&quot;, displayName: &quot;Undeploy&quot;],
    [planType: &quot;redeploy&quot;, displayName: &quot;Redeploy&quot;],
  ]
],
</pre></div>
</div>
<p>The <em>standard</em> plan types are: <tt class="docutils literal"><span class="pre">deploy</span></tt>, <tt class="docutils literal"><span class="pre">redeploy</span></tt>, <tt class="docutils literal"><span class="pre">undeploy</span></tt>, <tt class="docutils literal"><span class="pre">bounce</span></tt> and <tt class="docutils literal"><span class="pre">transition</span></tt> (which requires a <tt class="docutils literal"><span class="pre">state</span></tt> attribute).</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">By using the <a class="reference internal" href="orchestration-engine.html#goe-plugins"><em>plugin hook</em></a> <tt class="docutils literal"><span class="pre">PlannerService_pre_computePlans</span></tt> you can add your own plan types!</p>
</div>
</div>
<div class="section" id="tail">
<span id="console-configuration-tail"></span><h4>Tail<a class="headerlink" href="#tail" title="Permalink to this headline">¶</a></h4>
<p>This section defines the default size and refresh rate (how long between polls) for the tail feature:</p>
<div class="highlight-text"><div class="highlight"><pre>tail: [
  size: &#39;10k&#39;, // size to use when tailing a file by default (MemorySize)
  refreshRate: &#39;5s&#39; // how long between polls (Timespan)
],
</pre></div>
</div>
</div>
<div class="section" id="features">
<span id="console-dashboard"></span><h4>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h4>
<p>This section allows you to enable/disable certain features:</p>
<div class="highlight-text"><div class="highlight"><pre>features:
[
  commands: true
],
</pre></div>
</div>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">commands</span></tt> is the feature which allows you to run any kind of (unix/shell) command on an agent. You can disable this feature entirely in which case it will not be present in the UI at all.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature also has an agent side to it and it needs to be properly configured as well. Check the <a class="reference internal" href="agent.html#agent-configuration"><em>agent configuration</em></a> section.</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>If the <tt class="docutils literal"><span class="pre">commands</span></tt> feature is enabled, then you can configure what happens with the result (IO) of the command execution:</p>
<div class="highlight-text"><div class="highlight"><pre>consoles &lt;&lt; [
   name: &#39;myConsole&#39;,
   ...,
   configTokens: [
     &#39;console.defaults.override&#39;: &quot;&quot;&quot;
def commandsDir =
  System.properties[&#39;org.linkedin.glu.console.commands.dir&#39;] ?: &quot;${System.properties[&#39;user.dir&#39;]}/commands&quot;

// storage type supported right now are &#39;filesystem&#39; and &#39;memory&#39;
console.commandsService.storageType = &#39;filesystem&#39;

// when storage is filesystem =&gt; where the commands are stored
console.commandsService.commandExecutionIOStorage.filesystem.rootDir = commandsDir

// when storage is memory =&gt; how many elements maximum to store (then start evicting...)
console.commandsService.commandExecutionIOStorage.memory.maxNumberOfElements = 25
     &quot;&quot;&quot;
   ]
],
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>By default, the IO of a command is stored on the filesystem in a path structure that is like
this. This allows for easy maintenance!:</p>
<div class="last highlight-text"><div class="highlight"><pre>.../commands/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;HH&gt;/&lt;z&gt;/&lt;commandId&gt;/*

Example:
.../commands/2012/11/15/07/PST/13b0533729f-18c3a1e8-2a19-4291-a161-77155d9472ae/command.json
.../commands/2012/11/15/07/PST/13b0533c29c-be265ce6-2d61-4502-acf8-978e18580cbe/command.json
.../commands/2012/11/15/07/PST/13b0533f383-0f61f819-6a0f-4639-9695-8060a13799c4/command.json
</pre></div>
</div>
</div>
</div>
<div class="section" id="dashboard">
<h2>Dashboard<a class="headerlink" href="#dashboard" title="Permalink to this headline">¶</a></h2>
<p>The dashboard is the main entry point of the console and is a visual representation of the <a class="reference internal" href="orchestration-engine.html#goe-delta"><em>delta</em></a>.</p>
<img alt="Console dashboard" class="align-center" src="_images/console-dashboard-600.png" />
<div class="section" id="customization">
<span id="console-dashboard-customization"></span><h3>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h3>
<p>Since 4.0.0, the dashboard can be customized by every user the way they see fit. Every user can also define as many <cite>dashboards</cite> as they want and the dropdown allows to switch between dashboard quickly.</p>
<img alt="Console dashboard" class="align-center" src="_images/console-dashboard-switch.png" />
<p>The easier way to create a new dashboard is to add filters and group by columns (by clicking on a column name) and then select <tt class="docutils literal"><span class="pre">'Save</span> <span class="pre">as</span> <span class="pre">new'</span></tt>. The new dashboard can then be further customized by clicking on the <tt class="docutils literal"><span class="pre">'Customize'</span></tt> subtab which shows the definition of the dashboard as a json document:</p>
<div class="highlight-text"><div class="highlight"><pre>{
  &quot;columnsDefinition&quot;: [
    {
      &quot;groupBy&quot;: &quot;uniqueCountOrUniqueVal&quot;,
      &quot;linkable&quot;: true,
      &quot;name&quot;: &quot;cluster&quot;,
      &quot;orderBy&quot;: &quot;asc&quot;,
      &quot;source&quot;: &quot;metadata.cluster&quot;,
      &quot;visible&quot;: true
    },
   ... etc ...
 ],
  &quot;customFilter&quot;: &quot;metadata.cluster=&#39;c1&#39;&quot;,
  &quot;errorsOnly&quot;: false,
  &quot;name&quot;: &quot;c1 cluster&quot;,
  &quot;summary&quot;: false
}
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt>: the name of the dashboard (will be displayed in the dropdown)</li>
<li><tt class="docutils literal"><span class="pre">errorsOnly</span></tt>: to display only rows that are in error</li>
<li><tt class="docutils literal"><span class="pre">summary</span></tt>: to display a summary view when there are more than one row with the same value (based on the first column). When this value is set to <tt class="docutils literal"><span class="pre">true</span></tt> then the <tt class="docutils literal"><span class="pre">groupBy</span></tt> entry of a column definition kicks in</li>
<li><tt class="docutils literal"><span class="pre">columnsDefinition</span></tt> is an array which defines each column. The order in the array defines in which order columns will be displayed so it is easy to move columns around by simply moving them in the array. Each column is defined this way:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt>: the name of the column as it appears in the dashboard</li>
<li><tt class="docutils literal"><span class="pre">source</span></tt>: which data in the model needs to be displayed using the <a class="reference internal" href="glossary.html#term-dotted-notation"><em class="xref std std-term">dotted notation</em></a> (see: <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for more details and examples on the dotted notation)</li>
<li><tt class="docutils literal"><span class="pre">orderBy</span></tt>: how to sort the column. Possible values are: <tt class="docutils literal"><span class="pre">asc</span> <span class="pre">/</span> <span class="pre">desc</span> <span class="pre">/</span> <span class="pre">null</span></tt> (<tt class="docutils literal"><span class="pre">null</span></tt> means ignore for sorting purposes)</li>
<li><tt class="docutils literal"><span class="pre">groupBy</span></tt>: how to group rows when using a <tt class="docutils literal"><span class="pre">summary</span></tt> view. Possible values are: <tt class="docutils literal"><span class="pre">uniqueVals</span> <span class="pre">/</span> <span class="pre">uniqueCount</span> <span class="pre">/</span> <span class="pre">uniqueCountOrUniqueVal</span> <span class="pre">/</span> <span class="pre">vals</span> <span class="pre">/</span> <span class="pre">count</span> <span class="pre">/</span> <span class="pre">min</span> <span class="pre">/</span> <span class="pre">max</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linkable</span></tt>: whether a link to add a filter should be displayed</li>
<li><tt class="docutils literal"><span class="pre">visible</span></tt>: whether the column should be visible at all (useful mostly internally for derived values)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="console-default-dashboard">
<span id="id4"></span><h3>Default Dashboard<a class="headerlink" href="#console-default-dashboard" title="Permalink to this headline">¶</a></h3>
<p>When a user logs in the first time it is assigned a <cite>default</cite> dashboard. This dashboard is defined in the configuration file under the <tt class="docutils literal"><span class="pre">defaults.dashboard</span></tt> section and can be a json string or a simple groovy array of <tt class="docutils literal"><span class="pre">columnsDefinition</span></tt> as defined previously. This is the one that comes by default:</p>
<div class="highlight-text"><div class="highlight"><pre>dashboard:
[
  [ name: &quot;mountPoint&quot;, source: &quot;mountPoint&quot; ],
  [ name: &quot;agent&quot;,      source: &quot;agent&quot;],
  [ name: &quot;tags&quot;,       source: &quot;tags&quot;,       groupBy: &quot;uniqueVals&quot;],
  [ name: &quot;container&quot;,  source: &quot;metadata.container.name&quot;],
  [ name: &quot;version&quot;,    source: &quot;metadata.version&quot;],
  [ name: &quot;product&quot;,    source: &quot;metadata.product&quot;],
  [ name: &quot;cluster&quot;,    source: &quot;metadata.cluster&quot;],
  [ name: &quot;status&quot;,     source: &quot;status&quot; ],
  [ name: &quot;statusInfo&quot;, source: &quot;statusInfo&quot;, groupBy: &quot;vals&quot;, visible: false],
  [ name: &quot;state&quot;,      source: &quot;state&quot;,                       visible: false]
]
</pre></div>
</div>
</div>
</div>
<div class="section" id="further-customizations">
<span id="console-further-customizations"></span><h2>Further customizations<a class="headerlink" href="#further-customizations" title="Permalink to this headline">¶</a></h2>
<p>The console is distributed as an exploded war file. As a result it is possible to customize the console further like entirely replacing css files, images and javascript. To do so, you use the <a class="reference internal" href="glu-config.html#glu-config-config-templates"><em>config-templates folder</em></a> concepts.</p>
<ul>
<li><ol class="first arabic">
<li><p class="first">Create a directory structure:</p>
<div class="highlight-text"><div class="highlight"><pre>config-templates/console-server/glu/repository/exploded-wars/org.linkedin.glu.console-webapp-@consoleMetaModel.version@/
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <tt class="docutils literal"><span class="pre">&#64;</span></tt> sign in the directory name is not an error. It is a replacement token that is processed during the distribution phase.</p>
</div>
</li>
<li><ol class="first arabic simple" start="2">
<li>This gives you access to the root of the webapp with 3 essential folders: <tt class="docutils literal"><span class="pre">css</span></tt>, <tt class="docutils literal"><span class="pre">images</span></tt> and <tt class="docutils literal"><span class="pre">js</span></tt>. Simply put your <a class="reference internal" href="glu-config.html#glu-config-templates"><em>templates</em></a> in the proper subfolder.</li>
</ol>
</li>
<li><ol class="first arabic simple" start="3">
<li>Run the setup tool with the <tt class="docutils literal"><span class="pre">--config-templates-root</span></tt> option.</li>
</ol>
</li>
</ul>
<p>For example, if you wanted to change the glu logo with your own logo:</p>
<div class="highlight-text"><div class="highlight"><pre># create directory structure
mkdir -p /tmp/myFolder/config-templates/console-server/glu/repository/exploded-wars/org.linkedin.glu.console-webapp-@consoleMetaModel.version@/images
# copy your logo with the proper name
cp &lt;my logo&gt;.png /tmp/myFolder/config-templates/console-server/glu/repository/exploded-wars/org.linkedin.glu.console-webapp-@consoleMetaModel.version@/images/glu_480_white.png
# run the setup tool
$GLU_HOME/bin/setup.sh -D -o xxxx --config-templates-root &quot;&lt;default&gt;&quot; --config-templates-root /tmp/myFolder/config-templates my-model.json.groovy
</pre></div>
</div>
</div>
<div class="section" id="log-files-display">
<span id="console-script-log-files"></span><h2>Log Files Display<a class="headerlink" href="#log-files-display" title="Permalink to this headline">¶</a></h2>
<p>When looking at an agent (agents view page), for each entry, there may be a log section determined by the fields declared in the script:</p>
<img alt="Script log files" class="align-center" src="_images/console-script-log-files.png" />
<p>In order to see an entry like this you can do the following in your script:</p>
<ul class="simple">
<li>declare any field which ends in <tt class="docutils literal"><span class="pre">Log</span></tt> (ex: <tt class="docutils literal"><span class="pre">serverLog</span></tt>)</li>
<li>declare a field called <tt class="docutils literal"><span class="pre">logsDir</span></tt> (pointing to a folder) which will display the <tt class="docutils literal"><span class="pre">more...</span></tt> link</li>
<li>declare a field called <tt class="docutils literal"><span class="pre">logs</span></tt> and of type <tt class="docutils literal"><span class="pre">Map</span></tt> where each entry will point to a log file</li>
</ul>
<p>Example of glu script:</p>
<div class="highlight-text"><div class="highlight"><pre>class GluScriptWithLogs
{
  def logsDir
  def serverLog
  def logs = [:]

  def install = {
    logsDir = shell.toResource(&quot;${mountPoint}/logs&quot;)
    serverLog = logsDir.&quot;server.log&quot; // using field with name ending in Log
    logs.gc = logsDir.&quot;gc.log&quot; // using logs map
  }
}
</pre></div>
</div>
</div>
<div class="section" id="first-bootstrap">
<h2>First bootstrap<a class="headerlink" href="#first-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>The very first time the console is started, it will create an admin user. Log in as this user:</p>
<div class="highlight-text"><div class="highlight"><pre>username: admin
password: admin
</pre></div>
</div>
<p>Then click on the <tt class="docutils literal"><span class="pre">'admin'</span></tt> tab (not the one called <tt class="docutils literal"><span class="pre">'Admin'</span></tt>) and click <tt class="docutils literal"><span class="pre">'Manage</span> <span class="pre">your</span> <span class="pre">credentials'</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is strongly recommended you immediately change the admin password!</p>
</div>
</div>
<div class="section" id="user-management">
<span id="console-user-management"></span><h2>User management<a class="headerlink" href="#user-management" title="Permalink to this headline">¶</a></h2>
<p>There are 2 ways to manage users.</p>
<div class="section" id="id5">
<h3>LDAP<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>If you define an ldap section in the configuration file (see <a class="reference internal" href="#console-configuration-ldap"><em>configuration section</em></a> for details), then the console will automatically allow any user who has the correct ldap credentials to login. If the user has never logged in before, a new account will be automatically created and the user will have the role <tt class="docutils literal"><span class="pre">USER</span></tt> which gives him read access mostly (and limited access to log files). This allows any user to login to the console without any administrator intervention.</p>
</div>
<div class="section" id="manual-user-management">
<h3>Manual user management<a class="headerlink" href="#manual-user-management" title="Permalink to this headline">¶</a></h3>
<p>Whether you use LDAP or not you can always use this method. If you don&#8217;t use LDAP then it is your only choice. On the <tt class="docutils literal"><span class="pre">Admin</span></tt> tab, you can create a new user by giving it a user name and a password. You can also assign roles to a user:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Role</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">USER</span></tt></td>
<td>mostly read access (limited access to some log files (cannot go anywhere
on the filesystem))</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RELEASE</span></tt></td>
<td>most of the traditional release actions (like starting and stopping
entries…)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ADMIN</span></tt></td>
<td>administrative role (create user, assign roles…)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RESTRICTED</span></tt></td>
<td>if you want to ban a user from the console</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No matter what the role the user in, actions taken are logged in the audit log that can be viewed from the <tt class="docutils literal"><span class="pre">Admin</span></tt> tab.</p>
</div>
</div>
<div class="section" id="password-management">
<h3>Password management<a class="headerlink" href="#password-management" title="Permalink to this headline">¶</a></h3>
<p>Even if you use LDAP, a user can assign himself a console password (useful if the password needs to be stored in scripts for example).</p>
</div>
<div class="section" id="console-tabs">
<h3>Console tabs<a class="headerlink" href="#console-tabs" title="Permalink to this headline">¶</a></h3>
<p>Take a look at the <a class="reference internal" href="tutorial.html"><em>tutorial</em></a> in order to get a feel for each tab.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
</div>
<div class="sidebar">
    <div class="admonition warning">
    <p class="first admonition-title">Warning</p>
        <p>
            2014/04/19: A <a href="https://github.com/pongasoft/glu/issues/262">critical bug</a> while upgrading has been found. It is strongly advised not to upgrade at this time.
        </p>
    </div>
  <div class="sidebar-entry">
    <h3>Table Of Contents</h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">What is glu?</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">A taste of glu (tutorial)</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html"> Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-script.html"> glu script</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration-engine.html"> Orchestration engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-model.html"> Static Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtering.html"> Filtering</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Console</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#console-in-action">Console in action</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#console-as-a-server">Console as a server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#console-as-a-war">Console as a war</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#console-agent-connection">Console &lt;-&gt; Agent Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugins">Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database">Database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-for-a-different-database-mysql">Example for a different database: MySql</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-databases-oracle-postgressql">Other databases: Oracle, PostgresSQL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldap">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-levels">Security Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuning">Tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#deployments-auto-archive">Deployments auto-archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limiting-the-number-of-parallel-steps">Limiting the number of parallel steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session-timeout">Session timeout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#plan">Plan</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#skipping-missing-agents">Skipping missing agents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ui-configuration">UI configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#custom-css">Custom Css</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-dashboard">Default Dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#model">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#non-editable-model">Non Editable Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shortcut-filters">Shortcut Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header">Header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dashboard-agent-links">Dashboard Agent Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plans">Plans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mountpoint-actions">MountPoint actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tail">Tail</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dashboard">Dashboard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#customization">Customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#console-default-dashboard">Default Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#further-customizations">Further customizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#log-files-display">Log Files Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="#first-bootstrap">First bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-management">User management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-user-management">Manual user management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#password-management">Password management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#console-tabs">Console tabs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="meta-model.html">Meta Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-config.html">Configuring glu</a></li>
<li class="toctree-l1"><a class="reference internal" href="easy-production-setup.html">Easy Production Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-tool.html"><tt class="docutils literal"><span class="pre">setup.sh</span></tt> tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="production-setup.html">Old Production Setup (prior to 5.1.0)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-setup.html">Compiling glu</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration-guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html">All content</a></li>
</ul>

  </div>
<div class="sidebar-entry">
  <h3>Quick Links</h3>
  <ul class="quick-links">
    <li><a href="https://bintray.com/pkg/show/general/pongasoft/glu/releases/">Download</a>
    <li><a href="tutorial.html">Tutorial</a>
    <li><a href="http://www.github.com/pongasoft/glu">Source Code</a>
    <li><a href="http://glu.977617.n3.nabble.com/">Forum / Questions / Help</a>
    <li><a href="http://devops.com/2011/07/09/glu-deployment-automation-video/">Video (July 2011)</a>
    <li><a href="https://plus.google.com/111352340806201326494" rel="publisher" style="text-decoration:none;">Google+<img src="https://ssl.gstatic.com/images/icons/gplus-32.png" alt="" style="border:0;width:16px;height:16px;margin:0;padding:0 0 0 .5em;vertical-align:middle"/></a>
    <li><a href="https://plus.google.com/communities/118019862679241960849">Google+ Community</a></li>
    <li><a href="http://twitter.com/glutweets">Twitter</a>
    <li><a href="https://github.com/pongasoft/glu/issues">Issues / Tasks</a>
    <li><a href="RELEASE.html">Latest Changes</a>
  </ul>
</div>
<div class="sidebar-entry">
  <h3>Technologies</h3>
  <ul class="quick-links">
    <li><a href="http://www.ej-technologies.com/products/jprofiler/overview.html">JProfiler</a>
  </ul>
</div>
  <div class="sidebar-entry">
    <h3>Twitter</h3>
      <a class="twitter-timeline" href="https://twitter.com/glutweets" data-widget-id="457620062292041728">Tweets by @glutweets</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>


  </div>
</div>
<div style="display:none">
   <a href="https://plus.google.com/111352340806201326494" rel="publisher">Google+</a>
</div>
<div class="clearer"></div>
</div>

</div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="filtering.html" title="Filtering"
             >previous</a> |
          <a href="meta-model.html" title="Meta Model"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011-2014, Yan Pujante.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>